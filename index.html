<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录页_login</title>
    <link rel="stylesheet" href="login.css">
    <script src="jquery.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>登录</h1>
        <form action="">
            <input type="text" class="tbx" placeholder="账号">
            <input type="password" class="tbx" placeholder="密码">
            <input class="sub" type="submit" value="提交">
        </form>
    </div>
    <script>
        //定义一个con绑定.container
        var con = document.querySelector('.container');

        //定义两个函数开关(门)
        var isIn = true;   //鼠标进去的门，默认打开
        var isOut = false; //鼠标出来的门，默认关闭

        var span; //给未出生的元素取名字

        //监听鼠标进去事件+进去的方法
        con.addEventListener("mouseenter",(e)=>{
            if(isIn){
                //获取进入的鼠标位置
                //生成元素的位置 = 进入点距离窗口的距离 - 父盒子距离窗口的距离
                var inx = e.clientX - e.target.offsetLeft;
                var iny = e.clientY - e.target.offsetTop;

                //创建一个span元素，并且给他对应的出生坐标
                var el = document.createElement('span');
                el.style.left = inx + 'px';
                el.style.top = iny + 'px';
                con.appendChild(el); //添加到父元素中

                $('.container span').removeClass('out');
                $('.container span').addClass('in'); //添加进入动画
                span = document.querySelector(".container span");
                siIn = false; //关闭进来的门(不能使用进入的方法)
                isOut = true; //打开出去的门(可以使用出去的方法)
            }
        })

        //监听鼠标出去的事件+出来的方法
        con.addEventListener("mouseleave",(e)=>{
            if(isOut){
                //获取进入的鼠标位置
                //生成元素的位置 = 进入点距离窗口的距离 - 父盒子距离窗口的距离
                var inx = e.clientX - e.target.offsetLeft;
                var iny = e.clientY - e.target.offsetTop;

                $('.container span').removeClass('in');
                $('.container span').addClass('out'); //添加出去动画
                $(".out").css('left',inx + 'px'); //添加出去坐标
                $(".out").css('top',iny + 'px');

                
                isOut = false; //关闭出去的门(不能使用出去的方法)
                // 当动画结束后在删除元素
                setTimeout(()=>{
                    con.removeChild(span); //删除元素
                    isIn = true; //打开进来的门(可以使用出去的方法)
                },500)
            }
        })
    </script>
</body>
</html>